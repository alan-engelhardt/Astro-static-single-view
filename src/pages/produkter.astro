---
import Skelet from "../layouts/Skelet.astro";
import Card from "../components/Card.astro";

const url = "https://spabkjddxznsprvkkzuf.supabase.co/rest/v1/mad";
const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNwYWJramRkeHpuc3BydmtrenVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTM4MzMxMzUsImV4cCI6MjAwOTQwOTEzNX0.p8QClExDi-oKBQN9Gnk3nkdEkkwBAEwQVO_EMPpfAZQ";

const options = {
  headers: {
    apikey: key,
  },
};

// const response = await fetch(url, options);
const data = await fetch(url, options).then((response) => response.json());

//console.log(data);
---

<Skelet title="produkter" headline="Produkter">
  <div>
    <button>alle</button>
    <button>Sunde</button>
    <button>Usunde</button>
  </div>

  <section class="liste wrap">
    {
      data.map((item) => {
        return <Card data={item} />;
      })
    }
  </section>
</Skelet>

<style>
  div {
    margin: 0 3.2em 1em;
  }
  button {
    margin: 0.2rem;
    padding: 0.5rem;
    background-color: cornflowerblue;
    color: white;
    border-radius: 5px;
    border: none;
  }
</style>

<script>
  const knapper = document.querySelectorAll("button");
  knapper.forEach((knap) => {
    knap.addEventListener("click", () => {
      console.log(knap.textContent);
      document.querySelectorAll("article").forEach((elm) => elm.classList.add("gem"));
      if (knap.textContent === "Sunde") {
        document.querySelectorAll(".sunde").forEach((elm) => elm.classList.remove("gem"));
      } else if (knap.textContent === "Usunde") {
        document.querySelectorAll(".usunde").forEach((elm) => elm.classList.remove("gem"));
      } else {
        document.querySelectorAll("article").forEach((elm) => elm.classList.remove("gem"));
      }
    });
  });
</script>
